// --- 圆环循环图标准代码 ---
digraph CircularLoopDiagram {

    // 1. 全局图表设置
    graph [
        // 【核心】指定使用 twopi 引擎来创建圆环/放射状布局
        layout="twopi",

        // --- 美学风格 ---
        bgcolor="#1E2A3B", // 深色背景
        fontname="Microsoft YaHei, PingFang SC, sans-serif", // 支持中文的字体
        fontcolor="white",
        fontsize=18,
        label="Echopolis 核心游戏循环",
        labelloc="t", // 标题位置 (t=顶部, b=底部)
        pad="1.0",    // 图表内边距
        ranksep="3.0" // 节点与中心点的距离
    ];

    // 2. 全局节点样式 (定义所有方块的默认外观)
    node [
        fontname="Microsoft YaHei, PingFang SC, sans-serif",
        shape=box,          // 形状
        style="rounded,filled", // 圆角、填充
        color="#00AEEF",    // 边框颜色 (亮蓝色)
        fillcolor="#2C3E50",// 填充色 (深灰蓝)
        fontcolor="white",  // 文字颜色
        width=4,            // 固定宽度
        height=2.2          // 固定高度
    ];

    // 3. 全局箭头样式
    edge [
        fontname="Microsoft YaHei, PingFang SC, sans-serif",
        color="#3B82F6",    // 箭头颜色
        fontcolor="#A0AEC0", // 箭头标签文字颜色
        fontsize=12
    ];


    // 4. 定义所有节点
    
    // 中心节点 (AI化身)
    Core [
        // 【核心】指定该节点为中心点
        root=true,
        
        label="AI Agent\nYour Digital Twin (你的数字孪生)",
        shape=doublecircle, // 双圆圈样式
        style="filled",
        fillcolor="#1E2A3B", // 填充色与背景相同
        color="#3B82F6",    // 边框颜色
        fontcolor="white",
        fontsize=18
    ];

    // 四个环绕节点
    Observe [ label="1. 观察 (Observe)\n\n• 审阅财务报表\n• 查看AI心理状态\n• 接收宏观新闻\n• 发现决策事件" ];
    Reflect [ label="2. 思考 (Reflect)\n\n• 分析AI行为动机\n• 评估风险与机遇\n• 制定干预策略\n• “我该对‘他’说些什么？”" ];
    Intervene [ label="3. 干预 (Intervene)\n\n• 发出“意识回响”\n• 消耗干预点数(IP)\n• 选择干预类型", color="#FFA500" ]; // 橙色高亮
    Witness [ label="4. 见证 (Witness)\n\n• 观察AI的即时反馈\n• 追踪长期连锁后果\n• AI化身学习与演化\n• 世界状态发生改变" ];


    // 5. 定义连接关系 (形成闭环)
    // 这个顺序决定了节点在圆环上的排列位置 (逆时针)
    Observe   -> Reflect;
    Reflect   -> Intervene;
    Intervene -> Witness   [label="Action & Consequence\n(行动与后果)"];
    Witness   -> Observe   [label="New State & New Loop\n(新状态，新循环)"];
}