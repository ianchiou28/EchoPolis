# 🌆 Echopolis (回声都市)

> 一个完全AI驱动的个性化金融模拟游戏

## 📋 项目概述

Echopolis是一个创新的金融模拟游戏，玩家通过"意识回响"与DeepSeek AI化身互动，体验基于MBTI人格的智能决策。每个AI化身都拥有独特的思维模式和行为特征，能够进行真实的金融分析和投资决策。

### 🎯 核心特色
- **🤖 DeepSeek AI驱动**: 真正的AI决策，非预设脚本
- **🧠 MBTI人格系统**: 16种人格类型，各具特色的决策风格
- **💭 意识回响机制**: 玩家建议影响AI决策，基于信任度动态调整
- **💰 完整金融系统**: 投资组合、交易记录、现金流管理
- **🎲 命运轮盘**: 8种出身背景，不同的起始条件和月度开销

## 🎮 游戏特色

### 🤖 DeepSeek AI 决策引擎
- **真实AI思考**: 每个决策都由DeepSeek AI根据人格特质进行分析
- **动态情况生成**: AI根据当前状态生成个性化的决策场景
- **智能投资建议**: AI提供具体的投资项目名称和详细分析
- **个性化对话**: 真实的AI内心独白和情感表达

### 🧠 MBTI人格系统
- **16种人格类型**: 每种类型都有独特的决策模式
  - **INTP**: "逻辑学家" - 分析导向，容易过度思考
  - **ENTJ**: "指挥官" - 果断决策，偏好高风险高收益
  - **ISTJ**: "物流师" - 保守稳健，偏好传统投资
  - **ESFP**: "表演者" - 情绪化决策，易受社交影响

### 💭 意识回响系统
- **自然语言交互**: 通过文字与AI化身对话
- **信任度机制**: 好建议提升信任，坏建议降低信任
- **动态影响权重**: 信任度决定玩家建议的影响力
- **智能分析**: AI理解并回应玩家的建议和情感

### 💰 完整金融模拟
- **回合制时间**: 每决策一次 = 前进一个月
- **多元投资**: 短期、中期、长期投资组合
- **现金流管理**: 实时计算可用资金和投资收益
- **月度收支**: 自动工资收入和基于阶级的生活开销
- **破产机制**: 现金不足时游戏结束

### 🎲 命运轮盘
- **8种出身**: 从亿万富豪到低收入户的不同起点
- **差异化开销**: 不同阶级有不同的月度生活成本
- **特殊背景**: 每种命运都有独特的背景故事和特质

## 🚀 快速开始

### 环境要求
- **Python 3.8+**
- **Node.js 16+**
- **DeepSeek API Key** (获取AI功能)

### 安装步骤

1. **克隆项目**
```bash
git clone <repository-url>
cd EchoPolis
```

2. **安装依赖**
```bash
# Python依赖
pip install -r requirements.txt

# 前端依赖
cd frontend
npm install
cd ..
```

3. **配置API Key**
```bash
# 编辑 config.json
{
  "deepseek_api_key": "sk-your-deepseek-api-key"
}
```

### 启动游戏

**一键启动（推荐）**
```bash
python start_full.py
```

**分别启动**
```bash
# 后端服务
python backend/start_backend_only.py

# 前端服务（新终端）
cd frontend && npm run dev
```

### 访问地址
- 🎮 **游戏界面**: http://localhost:3001
- 🔧 **后端API**: http://localhost:8000
- 📚 **API文档**: http://localhost:8000/docs

## 🎮 游戏流程

### 1. 创建账户和AI化身
```
🔐 注册/登录账户
🎭 选择MBTI人格类型 (如: INTP - 逻辑学家)
✏️ 输入AI化身姓名
🎲 命运轮盘决定出身背景
💰 获得初始资金和特殊属性
```

### 2. AI生成决策情况
```
🤖 DeepSeek AI根据你的状态生成个性化情况:

"作为INTP型的Alex，你刚入职科技公司担任数据分析师。
大学导师联系你参与量化投资课程，学费12,000 CP，
但你发现租住环境有霉菌问题需要搬家..."

📋 AI提供3个选择:
1. 优先投资教育 - 支付课程费用
2. 改善居住环境 - 搬到更好的地方  
3. 保守策略 - 维持现状并储蓄
```

### 3. 意识回响互动
```
💭 输入你的建议:
"我建议优先投资教育，长期收益更重要"

🤖 AI分析并决策:
"你的建议很有道理。作为INTP，我确实更重视知识积累...
虽然居住环境不佳会影响健康，但这个学习机会难得。"

📊 决策结果:
✅ 选择: 优先投资教育
💰 现金: -12,000 CP
❤️ 健康: -5 (居住环境)
🧠 能力: +10 (教育投资)
🤝 信任度: +3 (采纳建议)
```

### 4. 持续游戏循环
```
🔄 每个决策推进1个月
💵 自动发放月工资
💸 扣除月度生活开销
📈 投资项目产生收益
🎲 AI生成新的决策情况
```

## 🏗️ 技术架构

### 系统结构
```
EchoPolis/
├── 🤖 core/                    # 核心游戏引擎
│   ├── ai/deepseek_engine.py   # DeepSeek AI集成
│   ├── avatar/ai_avatar.py     # AI化身逻辑
│   ├── entities/brain.py       # 决策大脑模块
│   ├── systems/                # 游戏系统
│   └── database/database.py    # 数据持久化
├── 🔧 backend/                 # FastAPI后端服务
│   └── app/
│       ├── api/routes.py       # RESTful API
│       └── services/           # 业务逻辑
├── 🎨 frontend/                # Vue.js前端界面
│   └── src/
│       ├── views/Game.vue      # 主游戏界面
│       ├── components/         # UI组件
│       └── stores/game.js      # 状态管理
└── 📊 echopolis.db            # SQLite数据库
```

### 技术栈
- **🤖 AI引擎**: DeepSeek API
- **🔧 后端**: Python 3.8+, FastAPI, SQLite
- **🎨 前端**: Vue 3, Vite, Pinia, Axios
- **💾 数据库**: SQLite (账户隔离)
- **🏛️ 架构**: 模块化设计，AI驱动的决策系统

## 🔧 核心机制

### 🤖 AI决策系统
- **DeepSeek驱动**: 真实的AI分析和决策，非预设脚本
- **人格一致性**: AI严格按照MBTI特质进行决策
- **上下文感知**: 考虑当前财务状况、健康状态、历史决策
- **动态学习**: 根据玩家反馈调整决策权重

### 💭 信任度机制
- **初始信任**: 50/100
- **信任增长**: 好建议被采纳且结果良好 (+2~5)
- **信任下降**: 坏建议导致损失 (-5~10)
- **影响权重**: 高信任度时AI更重视玩家建议

### 📊 财务系统
- **现金流**: 总资产 - 投资资产 = 可用现金
- **投资类型**: 短期(1-3月)、中期(4-8月)、长期(9月+)
- **收益计算**: 自动处理投资到期和月收益
- **破产检测**: 现金不足时触发游戏结束

### 🎭 人格影响
- **决策风格**: 不同MBTI类型有不同的风险偏好
- **思考模式**: 逻辑型vs情感型的决策差异
- **压力反应**: 高压力时的决策倾向变化
- **社交影响**: 外向型更容易受他人建议影响

## 🧪 测试验证

### AI功能测试
```bash
# DeepSeek集成测试
python test_deepseek_integration.py

# Brain模块测试
python test_brain.py

# 前后端连接测试
# 打开浏览器访问: test_frontend_backend.html
```

### 功能验证
- ✅ DeepSeek AI决策正常工作
- ✅ MBTI人格影响决策风格
- ✅ 投资和交易记录完整
- ✅ 信任度系统动态调整
- ✅ 前后端API通信正常

## 📊 功能状态

### ✅ 核心功能完成
- [x] **DeepSeek AI集成** - 真实AI决策和情况生成
- [x] **MBTI人格系统** - 16种类型，各具特色
- [x] **意识回响机制** - 玩家建议影响AI决策
- [x] **完整金融系统** - 投资、交易、现金流管理
- [x] **命运轮盘** - 8种出身背景
- [x] **账户系统** - 登录注册，数据隔离
- [x] **Vue.js前端** - 现代化Web界面
- [x] **数据持久化** - SQLite数据库存储
- [x] **实时更新** - 投资收益、月度收支
- [x] **破产机制** - 现金不足时游戏结束

### 🎯 系统特点
- 🤖 **100% AI驱动** - 所有决策都由DeepSeek AI进行
- 🧠 **人格一致性** - AI严格按照MBTI特质行为
- 💰 **真实金融模拟** - 完整的投资和资产管理
- 🎮 **高度互动** - 玩家建议实时影响AI决策

## 🔮 未来展望

### 🌟 增强功能
- **多AI化身**: 同时管理多个不同人格的AI
- **市场模拟**: 动态的股票和基金价格波动
- **社交网络**: AI化身之间的互动和影响
- **宏观经济**: 经济周期对投资的影响

### 🚀 技术升级
- **语音交互**: 与AI化身进行语音对话
- **情感分析**: 更深入的情感和心理状态模拟
- **3D可视化**: 沉浸式的虚拟金融世界
- **移动端**: iOS/Android原生应用

## 🤝 贡献指南

欢迎参与EchoPolis的开发！

### 开发环境
```bash
# 1. Fork并克隆项目
git clone <your-fork-url>
cd EchoPolis

# 2. 安装依赖
pip install -r requirements.txt
cd frontend && npm install && cd ..

# 3. 配置API Key
# 编辑 config.json 添加你的DeepSeek API Key

# 4. 运行测试
python test_deepseek_integration.py
```

### 贡献方式
- 🐛 **Bug报告**: 提交Issue描述问题
- 💡 **功能建议**: 提出新功能想法
- 🔧 **代码贡献**: 提交Pull Request
- 📚 **文档改进**: 完善README和注释

### 代码规范
- Python: 遵循PEP 8
- JavaScript: 使用ESLint
- 提交前运行测试
- 保持模块化和可读性

## 📄 许可证

MIT License - 开源免费使用

## 🌟 致谢

- **DeepSeek AI** - 提供强大的AI决策能力
- **Vue.js & FastAPI** - 优秀的前后端框架
- **MBTI理论** - 人格类型学的科学基础

---

## 🎯 项目亮点

### 🤖 真正的AI驱动
- 不是预设脚本，而是真实的AI思考
- DeepSeek AI根据人格特质进行决策
- 每个决策都包含AI的详细思考过程

### 🧠 科学的人格系统
- 基于MBTI理论的16种人格类型
- 每种类型都有独特的决策风格
- AI严格按照人格特质进行行为

### 💰 完整的金融模拟
- 真实的投资组合管理
- 动态的现金流计算
- 完整的交易记录系统

### 💭 创新的交互方式
- 通过自然语言与AI对话
- 玩家建议实时影响AI决策
- 基于信任度的动态权重系统

---

**EchoPolis** - 在AI的回响中探索金融决策的艺术 🌆✨

*"每一个决策都是一次回响，每一次回响都塑造着未来"*