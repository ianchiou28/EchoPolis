# 🌆 EchoPolis (回声都市)

> 由AI驱动的社会金融模拟器：重新定义金融教育，让每个年轻人都拥有自己的财富人生沙盘

## 📖 项目概述

EchoPolis是一个突破性的金融行为洞察引擎，融合AIGC与数字孪生技术，为Z世代打造安全可控的"第二人生"财富体验。通过"意识回响"与DeepSeek AI化身深度互动，用户在零风险环境中探索金融决策、理解风险与成长，获得真实而深刻的财商教育。

### 🎯 核心设计哲学

| 概念 | 描述 |
|------|------|
| **一面镜子** (自我认知) | AI化身精准映射你的决策模式、风险偏好与思维惯性 |
| **一个回响** (玩法灵魂) | 语言干预如投石入湖，激起层层涟漪，模拟现实选择的复杂性 |
| **一个沙盘** (核心价值) | 绝对安全的实验场，无惧风险地体验贷款、创业、投资的全过程 |

### ✨ 核心特色

- 🤖 **DeepSeek AI驱动**: 真正的AI思考与决策，构建有"灵魂"的金融新物种
- 🧠 **MBTI人格系统**: 16种人格类型的"意识复刻"，还原不同人格的决策特质
- 🔊 **意识回响机制**: 非线性语言干预，基于信任度的动态影响权重系统
- 🏷️ **用户标签系统**: 基于行为自动生成标签，个性化事件推荐
- 🎲 **命运轮盘**: 8种社会阶层起点，差异化的人生轨迹与成长路径
- 📊 **行为洞察**: 沉淀独特的金融行为数据，构建个性化用户画像

---

## 🏗️ 系统架构

### 三大核心模块

```
┌─────────────────────────────────────────────────────────────────┐
│                     EchoPolis 三大核心模块                        │
├─────────────────────┬─────────────────────┬─────────────────────┤
│   🗺️ 世界沙盘       │   🎲 事件回响        │   👤 个人中心        │
│  /world-sandbox     │  /event-echo        │  /personal-center   │
├─────────────────────┼─────────────────────┼─────────────────────┤
│ • 城市建筑地图      │ • 用户标签展示       │ • 个人档案          │
│ • 状态概览卡片      │ • 个性化事件推荐     │ • 系统档案          │
│ • 建筑内部视图      │ • 事件选择与执行     │ • 排行榜            │
│   - 🏦 中央银行     │ • 标签权重更新       │ • 成就系统          │
│   - 📈 量化交易所   │ • 8大事件分类        │ • 用户标签管理      │
│   - 💼 人才中心     │   - 财务决策         │ • 行为洞察          │
│   - 🏠 房产中枢     │   - 职业发展         │                     │
│   - 🎯 生活广场     │   - 生活选择         │                     │
│   - 📚 知识学院     │   - 社交关系         │                     │
│   - 🕒 时光塔       │   - 投资机会         │                     │
│   - 📖 档案馆       │   - 突发事件         │                     │
│ • 时间推进系统      │   - 个人成长         │                     │
│                     │   - 消费抉择         │                     │
└─────────────────────┴─────────────────────┴─────────────────────┘
```

### 技术栈

| 层级 | 技术 | 说明 |
|------|------|------|
| **前端** | Vue 3.4 + Vite 5 | 现代化响应式UI框架 |
| **状态管理** | Pinia | Vue官方状态管理库 |
| **路由** | Vue Router 4 | 单页应用路由 |
| **样式** | CSS Variables | 终端/赛博朋克主题 |
| **后端** | FastAPI | 高性能Python异步框架 |
| **AI引擎** | DeepSeek API | 大语言模型决策引擎 |
| **数据库** | SQLite | 轻量级本地数据库 |

---

## 🚀 快速开始

### 环境要求

- **Python** 3.8+
- **Node.js** 16+
- **DeepSeek API Key** (获取AI功能)

### 安装步骤

```bash
# 1. 克隆项目
git clone https://github.com/ianchiou28/EchoPolis.git
cd EchoPolis

# 2. 安装Python依赖
pip install -r requirements.txt

# 3. 安装前端依赖
cd frontend
npm install
cd ..

# 4. 配置API Key (编辑 config.json)
{
  "deepseek_api_key": "sk-your-deepseek-api-key"
}

# 5. 一键启动
python start.py
```

### 访问地址

| 服务 | 地址 |
|------|------|
| 🎮 游戏界面 | http://localhost:3001 |
| 🔧 后端API | http://localhost:8000 |
| 📚 API文档 | http://localhost:8000/docs |

---

## 📁 项目结构

```
EchoPolis/
├── 📂 frontend/                    # Vue.js前端
│   └── src/
│       ├── views/
│       │   ├── WorldSandbox.vue    # 🗺️ 世界沙盘主页
│       │   ├── EventEcho.vue       # 🎲 事件回响模块
│       │   ├── PersonalCenter.vue  # 👤 个人中心模块
│       │   ├── Login.vue           # 登录页面
│       │   └── CharacterSelect.vue # 角色选择
│       ├── components/
│       │   └── views/              # 建筑内部视图组件
│       │       ├── BankingView.vue
│       │       ├── TradingView.vue
│       │       ├── CareerView.vue
│       │       └── ...
│       ├── stores/
│       │   ├── game.js             # 游戏状态管理
│       │   └── theme.js            # 主题管理
│       └── router/
│           └── index.js            # 路由配置
│
├── 📂 backend/                     # FastAPI后端
│   └── app/
│       ├── api/
│       │   └── routes.py           # API路由 (含标签/事件API)
│       ├── services/
│       │   └── game_service.py     # 游戏业务逻辑
│       └── models/
│           └── requests.py         # 请求数据模型
│
├── 📂 core/                        # 核心游戏引擎
│   ├── ai/
│   │   └── deepseek_engine.py      # DeepSeek AI集成
│   ├── avatar/
│   │   └── ai_avatar.py            # AI化身管理
│   ├── entities/
│   │   ├── brain.py                # 决策大脑模块
│   │   └── person.py               # 人物实体
│   ├── systems/
│   │   ├── user_tag_system.py      # 🏷️ 用户标签系统 (NEW)
│   │   ├── mbti_traits.py          # MBTI人格系统
│   │   ├── fate_wheel.py           # 命运轮盘
│   │   ├── investment_system.py    # 投资管理
│   │   ├── behavior_insight_system.py  # 行为洞察
│   │   └── achievement_system.py   # 成就系统
│   └── database/
│       └── database.py             # 数据持久化
│
├── config.json                     # 配置文件
├── start.py                        # 一键启动脚本
├── requirements.txt                # Python依赖
└── README.md                       # 项目文档
```

---

## 🏷️ 用户标签系统

### 标签分类 (8大类别，40+预设标签)

| 类别 | 图标 | 示例标签 |
|------|------|----------|
| 投资风格 | 📈 | 价值投资者、成长投资者、科技投资者 |
| 风险态度 | ⚖️ | 风险爱好者、稳健型、保守型、损失厌恶 |
| 生活态度 | 🏠 | 极简主义、体验优先、健康优先 |
| 社交风格 | 👥 | 社交达人、内向型、慷慨大方 |
| 消费习惯 | 🛒 | 节俭型、物质主义者 |
| 职业倾向 | 💼 | 事业导向、稳定工作、创业者 |
| 财务偏好 | 💰 | 长期主义、分散投资、股息偏好 |
| 性格特质 | 🎭 | 激进型、温和型 |

### 标签运作机制

```
用户行为 → 事件选择 → 标签权重更新 → 个性化事件推荐
    ↑                                        ↓
    └──────────── 形成闭环 ←─────────────────┘
```

---

## 🎲 事件回响系统

### 事件分类

| 分类 | 图标 | 描述 |
|------|------|------|
| 财务决策 | 💰 | 理财产品、基金定投、加密货币等 |
| 职业发展 | 💼 | 跳槽、创业、副业、技能培训 |
| 生活选择 | 🏠 | 购房、旅行、消费决策 |
| 社交关系 | 👥 | 朋友借钱、社交活动、份子钱 |
| 投资机会 | 📈 | 科技股、IPO、私募基金 |
| 突发事件 | ⚡ | 车祸、家人住院、失业 |
| 个人成长 | 🌱 | MBA、健康体检、心理咨询 |
| 消费抉择 | 🛒 | 换手机、购物节、装修 |

### 个性化推荐算法

```
匹配度 = Σ(事件标签 ∩ 用户标签) × 用户标签权重 × 随机因子
```

---

## 🎮 游戏流程

```
┌────────────┐    ┌────────────┐    ┌────────────┐
│  1. 登录   │ → │ 2. 创建角色 │ → │ 3. 命运轮盘 │
│  注册账户  │    │  选择MBTI  │    │  决定出身  │
└────────────┘    └────────────┘    └────────────┘
                                          ↓
┌────────────┐    ┌────────────┐    ┌────────────┐
│ 6. 推进时间│ ← │ 5. 做出选择 │ ← │ 4. 探索沙盘 │
│  月度结算  │    │  执行决策  │    │ 进入建筑   │
└────────────┘    └────────────┘    └────────────┘
       ↓
┌────────────┐    ┌────────────┐
│ 7. 事件回响│ → │ 8. 查看洞察 │
│ 个性化事件 │    │ 行为分析   │
└────────────┘    └────────────┘
```

---

## 🔌 API 端点

### 用户标签 API

| 方法 | 端点 | 描述 |
|------|------|------|
| GET | `/api/user/tags/{session_id}` | 获取用户所有标签 |
| POST | `/api/user/tags/{session_id}/update` | 更新标签权重 |
| GET | `/api/user/tags/categories` | 获取标签分类 |
| GET | `/api/user/tags/all` | 获取所有可用标签 |

### 事件回响 API

| 方法 | 端点 | 描述 |
|------|------|------|
| GET | `/api/events/pool` | 获取完整事件池 |
| GET | `/api/events/personalized/{session_id}` | 获取个性化事件 |
| POST | `/api/events/select/{session_id}` | 选择事件 |
| POST | `/api/events/complete/{session_id}` | 完成事件 |
| GET | `/api/events/history/{session_id}` | 获取事件历史 |
| GET | `/api/events/categories` | 获取事件分类 |

### 核心游戏 API

| 方法 | 端点 | 描述 |
|------|------|------|
| POST | `/api/create-avatar` | 创建AI化身 |
| POST | `/api/generate-situation` | 生成决策情况 |
| POST | `/api/echo` | 发送意识回响 |
| POST | `/api/session/advance` | 推进游戏时间 |
| GET | `/api/avatar/status` | 获取化身状态 |
| GET | `/api/assets` | 获取资产信息 |

---

## 🧠 MBTI 人格系统

| 类型 | 名称 | 特点 |
|------|------|------|
| INTJ | 建筑师 | 富有想象力和战略性的思想家 |
| INTP | 逻辑学家 | 具有创造性的发明家 |
| ENTJ | 指挥官 | 大胆的强势领导者 |
| ENTP | 辩论家 | 聪明好奇的思想家 |
| INFJ | 提倡者 | 神秘的理想主义者 |
| INFP | 调停者 | 善良的利他主义者 |
| ENFJ | 主人公 | 魅力非凡的领导者 |
| ENFP | 竞选者 | 热情的社交者 |
| ISTJ | 物流师 | 可靠的现实主义者 |
| ISFJ | 守护者 | 温暖的守护者 |
| ESTJ | 总经理 | 出色的管理者 |
| ESFJ | 执政官 | 善于社交的帮助者 |
| ISTP | 鉴赏家 | 实际的实验家 |
| ISFP | 探险家 | 灵活的艺术家 |
| ESTP | 企业家 | 精力充沛的感知者 |
| ESFP | 表演者 | 自发的娱乐者 |

---

## 📊 数据流

```
┌─────────┐     ┌─────────┐     ┌─────────┐
│  用户   │ ──→ │ Vue前端 │ ──→ │ FastAPI │
│  操作   │     │ (Pinia) │     │  后端   │
└─────────┘     └─────────┘     └─────────┘
                                     │
                    ┌────────────────┼────────────────┐
                    ↓                ↓                ↓
              ┌─────────┐     ┌─────────┐     ┌─────────┐
              │ DeepSeek│     │  Core   │     │ SQLite  │
              │   AI    │     │  Engine │     │   DB    │
              └─────────┘     └─────────┘     └─────────┘
```

---

## ✅ 功能完成状态

### 核心功能

- [x] DeepSeek AI集成
- [x] MBTI人格系统 (16种类型)
- [x] 意识回响机制
- [x] 完整金融系统
- [x] 命运轮盘 (8种出身)
- [x] 账户系统
- [x] 数据持久化

### 三大模块 (NEW)

- [x] 🗺️ 世界沙盘 - 城市建筑地图
- [x] 🎲 事件回响 - 个性化事件系统
- [x] 👤 个人中心 - 统一档案管理

### 扩展功能

- [x] 用户标签系统 (40+标签)
- [x] 行为洞察分析
- [x] 成就系统
- [x] 排行榜
- [x] 实时资产计算

---

## 📜 许可证

MIT License

## 👥 团队

**FinAI团队** - 南京大学学生团队

---

<div align="center">

*在AI的回响中探索金融决策的艺术，在虚拟的试错中获得真实的成长*

**🌆 EchoPolis - 你的第二人生财富沙盘 🌆**

</div>
