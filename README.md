# 🌆 EchoPolis (回声都市)

> 超个人化AI驱动的社会金融模拟器 - 你的第一个财富人生沙盘

## 📋 项目概述

EchoPolis是一个突破性的金融行为洞察引擎，融合AIGC与数字孪生技术，为Z世代打造安全可控的"第二人生"财富体验。通过"意识回响"与DeepSeek AI化身深度互动，用户在零风险环境中探索金融决策、理解风险与成长，获得真实而深刻的财商教育。

### 🎯 核心设计哲学
- **一面镜子** (自我认知): AI化身精准映射你的决策模式、风险偏好与思维惯性
- **一个回响** (玩法灵魂): 语言干预如投石入湖，激起层层涟漪，模拟现实选择的复杂性
- **一个沙盘** (核心价值): 绝对安全的实验场，无惧风险地体验贷款、创业、投资的全过程

### 🎯 核心特色
- **🤖 DeepSeek AI驱动**: 真正的AI思考与决策，构建有"灵魂"的金融新物种
- **🧠 MBTI人格系统**: 16种人格类型的"意识复刻"，精准还原个体决策特质
- **💭 意识回响机制**: 非线性语言干预，基于信任度的动态影响权重系统
- **💰 完整金融生态**: 宏观经济周期、个人财务管理、社交化投资决策
- **🎲 命运轮盘**: 8种社会阶层起点，差异化的人生轨迹与成长路径
- **📊 行为洞察**: 沉淀独特的金融行为数据，构建个性化用户画像

## 🎮 产品特色：构建可信的"第二人生"

### 🤖 AI"行为皮层"系统
- **真实AI思考**: 基于加权决策矩阵的智能决策 = 长期目标 + 短期情绪 + 性格特质 + 玩家干预 + 随机扰动
- **动态情况生成**: AI根据宏观经济、个人状态、社交关系生成复杂决策场景
- **智能投资分析**: 提供具体项目评估、风险分析与收益预测
- **情感化交互**: 3D建模化身，表情随决策结果动态变化，增强代入感

### 🧠 MBTI人格系统
- **16种人格类型**: 每种类型都有独特的决策模式
  - **INTP**: "逻辑学家" - 分析导向，容易过度思考
  - **ENTJ**: "指挥官" - 果断决策，偏好高风险高收益
  - **ISTJ**: "物流师" - 保守稳健，偏好传统投资
  - **ESFP**: "表演者" - 情绪化决策，易受社交影响

### 💭 "意识回响"核心玩法
- **四类干预方式**: 启发(引导思考)、建议(具体操作)、指令(可能被拒绝)、情绪调节(鼓励/警告)
- **信任度演化**: 建议奏效→信任上升→更易采纳；频繁误导→信任下降→甚至无视
- **非线性反馈**: 你的一句话如石投湖心，AI反应往往超出预期，模拟现实复杂性
- **深度理解**: AI不仅执行指令，更能理解意图、情感与潜在动机

### 💰 "宏观世界"经济系统
- **动态经济周期**: 模拟通胀、房价波动、股市崩盘等宏观事件
- **多层次投资**: 短期(1-3月)、中期(4-8月)、长期(9月+)投资组合管理
- **社交化金融**: AI化身间的合作、竞争、借贷与婚姻关系
- **宏观NPC**: 政府(调控政策)、银行(放贷)、企业(招聘/解雇)的动态交互
- **真实现金流**: 基于社会阶层的差异化收支，完整的破产与重生机制

### 🎲 命运轮盘
- **8种出身**: 从亿万富豪到低收入户的不同起点
- **差异化开销**: 不同阶级有不同的月度生活成本
- **特殊背景**: 每种命运都有独特的背景故事和特质

## 🚀 快速开始

### 环境要求
- **Python 3.8+**
- **Node.js 16+**
- **DeepSeek API Key** (获取AI功能)

### 安装步骤

1. **克隆项目**
```bash
git clone <repository-url>
cd EchoPolis
```

2. **安装依赖**
```bash
# Python依赖
pip install -r requirements.txt

# 前端依赖
cd frontend
npm install
cd ..
```

3. **配置API Key**
```bash
# 编辑 config.json
{
  "deepseek_api_key": "sk-your-deepseek-api-key"
}
```

### 启动游戏

**一键启动（推荐）**
```bash
python start_full.py
```

**分别启动**
```bash
# 后端服务
python backend/start_backend_only.py

# 前端服务（新终端）
cd frontend && npm run dev
```

### 访问地址
- 🎮 **游戏界面**: http://localhost:3001
- 🔧 **后端API**: http://localhost:8000
- 📚 **API文档**: http://localhost:8000/docs

## 🎮 游戏流程

### 1. 创建账户和AI化身
```
🔐 注册/登录账户
🎭 选择MBTI人格类型 (如: INTP - 逻辑学家)
✏️ 输入AI化身姓名
🎲 命运轮盘决定出身背景
💰 获得初始资金和特殊属性
```

### 2. AI生成决策情况
```
🤖 DeepSeek AI根据你的状态生成个性化情况:

"作为INTP型的Alex，你刚入职科技公司担任数据分析师。
大学导师联系你参与量化投资课程，学费12,000 CP，
但你发现租住环境有霉菌问题需要搬家..."

📋 AI提供3个选择:
1. 优先投资教育 - 支付课程费用
2. 改善居住环境 - 搬到更好的地方  
3. 保守策略 - 维持现状并储蓄
```

### 3. 意识回响互动
```
💭 输入你的建议:
"我建议优先投资教育，长期收益更重要"

🤖 AI分析并决策:
"你的建议很有道理。作为INTP，我确实更重视知识积累...
虽然居住环境不佳会影响健康，但这个学习机会难得。"

📊 决策结果:
✅ 选择: 优先投资教育
💰 现金: -12,000 CP
❤️ 健康: -5 (居住环境)
🧠 能力: +10 (教育投资)
🤝 信任度: +3 (采纳建议)
```

### 4. 持续游戏循环
```
🔄 每个决策推进1个月
💵 自动发放月工资
💸 扣除月度生活开销
📈 投资项目产生收益
🎲 AI生成新的决策情况
```

## 🏗️ 技术架构

### 系统结构
```
EchoPolis/
├── 🤖 core/                    # 核心游戏引擎
│   ├── ai/deepseek_engine.py   # DeepSeek AI集成
│   ├── avatar/ai_avatar.py     # AI化身逻辑
│   ├── entities/brain.py       # 决策大脑模块
│   ├── systems/                # 游戏系统
│   └── database/database.py    # 数据持久化
├── 🔧 backend/                 # FastAPI后端服务
│   └── app/
│       ├── api/routes.py       # RESTful API
│       └── services/           # 业务逻辑
├── 🎨 frontend/                # Vue.js前端界面
│   └── src/
│       ├── views/Game.vue      # 主游戏界面
│       ├── components/         # UI组件
│       └── stores/game.js      # 状态管理
└── 📊 echopolis.db            # SQLite数据库
```

### 技术栈
- **🤖 AI引擎**: DeepSeek API
- **🔧 后端**: Python 3.8+, FastAPI, SQLite
- **🎨 前端**: Vue 3, Vite, Pinia, Axios
- **💾 数据库**: SQLite (账户隔离)
- **🏛️ 架构**: 模块化设计，AI驱动的决策系统

## 🔧 核心机制

### 🤖 AI决策系统
- **DeepSeek驱动**: 真实的AI分析和决策，非预设脚本
- **人格一致性**: AI严格按照MBTI特质进行决策
- **上下文感知**: 考虑当前财务状况、健康状态、历史决策
- **动态学习**: 根据玩家反馈调整决策权重

### 💭 信任度机制
- **初始信任**: 50/100
- **信任增长**: 好建议被采纳且结果良好 (+2~5)
- **信任下降**: 坏建议导致损失 (-5~10)
- **影响权重**: 高信任度时AI更重视玩家建议

### 📊 财务系统
- **现金流**: 总资产 - 投资资产 = 可用现金
- **投资类型**: 短期(1-3月)、中期(4-8月)、长期(9月+)
- **收益计算**: 自动处理投资到期和月收益
- **破产检测**: 现金不足时触发游戏结束

### 🎭 人格影响
- **决策风格**: 不同MBTI类型有不同的风险偏好
- **思考模式**: 逻辑型vs情感型的决策差异
- **压力反应**: 高压力时的决策倾向变化
- **社交影响**: 外向型更容易受他人建议影响

## 🧪 测试验证

### AI功能测试
```bash
# DeepSeek集成测试
python test_deepseek_integration.py

# Brain模块测试
python test_brain.py

# 前后端连接测试
# 打开浏览器访问: test_frontend_backend.html
```

### 功能验证
- ✅ DeepSeek AI决策正常工作
- ✅ MBTI人格影响决策风格
- ✅ 投资和交易记录完整
- ✅ 信任度系统动态调整
- ✅ 前后端API通信正常

## 📊 功能状态

### ✅ 核心功能完成
- [x] **DeepSeek AI集成** - 真实AI决策和情况生成
- [x] **MBTI人格系统** - 16种类型，各具特色
- [x] **意识回响机制** - 玩家建议影响AI决策
- [x] **完整金融系统** - 投资、交易、现金流管理
- [x] **命运轮盘** - 8种出身背景
- [x] **账户系统** - 登录注册，数据隔离
- [x] **Vue.js前端** - 现代化Web界面
- [x] **数据持久化** - SQLite数据库存储
- [x] **实时更新** - 投资收益、月度收支
- [x] **破产机制** - 现金不足时游戏结束

### 🎯 系统特点
- 🤖 **100% AI驱动** - 所有决策都由DeepSeek AI进行
- 🧠 **人格一致性** - AI严格按照MBTI特质行为
- 💰 **真实金融模拟** - 完整的投资和资产管理
- 🎮 **高度互动** - 玩家建议实时影响AI决策

## 🔮 战略愿景：从实验室到生态的演进

### 🎯 三步走战略路线
- **第一阶段(0-6月)**: MVP验证核心玩法，完成种子用户积累与数据收集
- **第二阶段(7-24月)**: 平台化运营，实现用户规模突破与业务价值验证
- **第三阶段(3-5年)**: 生态化构筑，成为Z世代首选的金融认知与行为洞察平台

### 🌟 核心价值创造
- **用户价值**: 获得有趣、可反思、能成长的"零风险"金融体验
- **教育价值**: 以寓教于乐方式提升Z世代财商素养，履行金融普惠责任
- **数据价值**: 沉淀独特的行为金融数据库，构建个性化用户画像
- **创新价值**: 成为"零风险、高效率"的金融产品敏捷测试平台

### 🚀 技术演进路径
- **AI智能体升级**: 多模态交互、情感计算、群体智能协作
- **数字孪生深化**: VR/AR沉浸体验、元宇宙金融世界构建
- **生态开放**: API接口开放，引入券商、保险等第三方金融伙伴
- **移动原生**: iOS/Android应用，随时随地的财富人生体验

## 🤝 贡献指南

欢迎参与EchoPolis的开发！

### 开发环境
```bash
# 1. Fork并克隆项目
git clone <your-fork-url>
cd EchoPolis

# 2. 安装依赖
pip install -r requirements.txt
cd frontend && npm install && cd ..

# 3. 配置API Key
# 编辑 config.json 添加你的DeepSeek API Key

# 4. 运行测试
python test_deepseek_integration.py
```

### 贡献方式
- 🐛 **Bug报告**: 提交Issue描述问题
- 💡 **功能建议**: 提出新功能想法
- 🔧 **代码贡献**: 提交Pull Request
- 📚 **文档改进**: 完善README和注释

### 代码规范
- Python: 遵循PEP 8
- JavaScript: 使用ESLint
- 提交前运行测试
- 保持模块化和可读性

## 📄 许可证

MIT License - 开源免费使用

## 🌟 致谢

- **DeepSeek AI** - 提供强大的AI决策能力
- **Vue.js & FastAPI** - 优秀的前后端框架
- **MBTI理论** - 人格类型学的科学基础

---

## 🎯 项目价值：构建未来金融教育新范式

### 🤖 突破性AI应用
- **有"灵魂"的AI**: 不是冰冷算法，而是有情感、有成长的数字生命体
- **人格一致性**: 严格按照MBTI特质的决策逻辑，真实还原个体思维模式
- **非线性交互**: 每次对话都可能产生意想不到的结果，模拟现实复杂性

### 🧠 科学的教育方法论
- **体验式学习**: 在"做中学"，通过试错获得深刻理解
- **个性化成长**: 基于用户画像的定制化财商提升路径
- **安全试错环境**: 零风险体验高风险决策，获得宝贵经验

### 💰 真实的金融生态
- **全生命周期**: 从储蓄到投资、从单身到家庭的完整财务管理
- **宏观微观结合**: 个人决策与经济周期的动态交互
- **社会化金融**: AI化身间的协作竞争，模拟真实社交金融场景

### 🌍 社会价值与使命
- **金融普惠**: 让金融知识不再是"有钱人的游戏"，人人可学、人人能懂
- **风险教育**: 在虚拟世界中识别金融陷阱，提升现实防骗能力
- **长期主义**: 培养正确的财富观与风险观，促进理性投资文化

---

**EchoPolis** - 重新定义金融教育，让每个年轻人都拥有自己的财富人生沙盘 🌆✨

*"在AI的回响中探索金融决策的艺术，在虚拟的试错中获得真实的成长"*

### 🏆 核心竞争优势
- 🎯 **首创性**: 全球首个AI数字孪生+金融教育的深度融合产品
- 🛡️ **安全性**: 零风险试错环境，让年轻人安心探索金融世界
- 🧠 **科学性**: 基于行为金融学与心理学的严谨设计
- 🌱 **成长性**: 不仅是游戏，更是陪伴一生的财富成长伙伴